@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@using C03_HeThongTimGiupViec.Models;
@inject IHttpContextAccessor _httpContextAccessor;
@{

    HttpContext httpContext = _httpContextAccessor.HttpContext;
    string userInfo = httpContext.Session.GetString("JwtToken");
}
<input hidden value="@userInfo" id="userInfo" />
<div class="home-page">
    <div class="job-container">
        <div class="container py-common">
            <h3 class="title-page">Recent Job Circulars</h3>
            <p class="subtitle-page">Many desktop publishing packages and web page editors</p>
            <div class="row gx-4">

                @foreach (Service s in ViewBag.services)
                {
                    <div class="col-4">
                        <div class="col-content">
                            <div class="">
                                <h4>@s.ServiceName</h4>
                                @*<p>Address: @p.Address</p>*@
                            </div>
                            <p>@s.Description </p>
                            <div class="d-flex justify-content-between align-items-center">
                                @*<div class="price">Price: @p.Price đ</div>*@
                                <button class="btn-showmore">View more</button>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>

    <div class="housekeeper-container">
        <div class="container py-common">
            <h3 class="title-page">Best Housemaid</h3>
            <p class="subtitle-page">Many desktop publishing packages and web page editors</p>
            <div class="row gx-5">
                @foreach (Account acc in ViewBag.accounts)
                {
                    <div class="col-3">
                        <div class="col-content">
                            <div style="aspect-ratio: 1 / 1;">
                                <img src="/Images/@acc.ProfilePicture" alt="" style="width:100%;" />
                            </div>
                            <div class="d-flex flex-column align-items-center">
                                <h4>@acc.FullName</h4>
                                <p>Address: @acc.Address</p>
                            </div>

                            <div class="d-flex justify-content-center">
                                <button class="btn-showmore">View Profile</button>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    <div class="post-container">
        <div class="container py-common">
            <h3 class="title-page">New Post</h3>
            <p class="subtitle-page">Many desktop publishing packages and web page editors</p>
            <div class="row gx-4">
                @foreach (Post p in ViewBag.posts)
                {
                    <div class="col-4">
                        <div class="col-content">
                            <div class="d-flex justify-content-start align-items-center gap-4">
                                <img src="~/Images/@p.Account.ProfilePicture" alt="" style="width:75px;" />
                                <div class="d-flex flex-column align-items-start">
                                    <h5>@p.Account.FullName</h5>
                                    <p>Address: @p.Address</p>
                                </div>
                            </div>
                            <div class="des">
                                <p> @p.Description </p>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<script>
    var userInfo = document.getElementById('userInfo').value;
    console.log(userInfo)
    if (userInfo) {
        account = JSON.parse(atob(userInfo.split(".")[1]));
        
        sessionStorage.setItem('account', JSON.stringify(account));
        var retrievedAccount = JSON.parse(sessionStorage.getItem('account'));
        console.log(retrievedAccount);
    }
</script>